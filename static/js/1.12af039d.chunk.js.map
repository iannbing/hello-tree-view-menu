{"version":3,"sources":["DemoPage/transpose.js","DemoPage/renderProps.js","DemoPage/index.js"],"names":["transposeSpace","_ref2","space","spaceIndex","content","pages","reduce","allPages","currentPage","pageIndex","label","t","url","u","isSpace","m","parentPage","p","path","split","filter","x","splice","length","newObj","createObjFromKeys","_ref","_ref$obj","obj","keys","value","key","shift","nodes","Object","objectSpread","index","join","cleanPath","merge_default","transpose","_ref3","data","Array","isArray","allSpaces","currentSpace","currentSpacePages","ToggleIcon","on","react_default","a","createElement","ToggleIconContainer","styled","_ref2$level","level","position","left","concat","width","height","ListGroupItemWithPadding","ListGroupItem_default","_ref3$level","paddingLeft","DEFAULT_PADDING","cursor","renderList","_ref5","search","items","Fragment","InputGroup_default","InputGroupAddon_default","addonType","Input_default","onChange","e","target","ListGroup_default","DemoPage","state","treeData","processData","_this","setState","navigate","props","history","push","this","_this2","_this$state","main_default","onClickItem","console","log","debounceTime","renderItem","_ref4","hasSubItems","isOpen","onClick","active","renderProps_ToggleIcon","getRenderItem","get_default","Component","withRouter"],"mappings":"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","file":"static/js/1.12af039d.chunk.js","sourcesContent":["import { merge } from 'lodash';\n\nconst createObjFromKeys = ({ obj = {}, keys, value }) => {\n  if (keys.length === 0) return {};\n  if (keys.length === 1) {\n    obj[keys[0]] = value;\n  } else {\n    const key = keys.shift();\n    obj[key] = obj[key] || {};\n    obj[key].nodes = {\n      ...obj[key].nodes,\n      ...createObjFromKeys({\n        obj: !obj[key].nodes ? {} : obj[key].nodes,\n        keys,\n        value,\n      }),\n    };\n  }\n  return obj;\n};\n\nconst cleanPath = path =>\n  path\n    ? path\n        .split('/')\n        .filter(x => x)\n        .join('/')\n    : '';\n\nconst transposeSpace = ({ space, spaceIndex }) => {\n  const { content } = space;\n  return content.pages.reduce((allPages, currentPage, pageIndex) => {\n    const label = currentPage.t;\n    const url = currentPage.u;\n    const isSpace = !!currentPage.m;\n    const parentPage = currentPage.p;\n    const path = url ? url.split('/').filter(x => x) : [];\n\n    // if it has a parent page, insert it to have complete nodes\n    if (parentPage) path.splice(path.length - 1, 0, parentPage);\n\n    const newObj = createObjFromKeys({\n      keys: path,\n      value: {\n        label,\n        index: isSpace ? spaceIndex : pageIndex,\n        url: cleanPath(url),\n      },\n    });\n    return merge(newObj, allPages);\n  }, {});\n};\n\nconst transpose = ({ data, index }) => {\n  if (Array.isArray(data))\n    return data.reduce((allSpaces, currentSpace, spaceIndex) => {\n      const currentSpacePages = transposeSpace({\n        space: currentSpace,\n        spaceIndex,\n      });\n      return {\n        ...allSpaces,\n        ...currentSpacePages,\n      };\n    }, {});\n  return transposeSpace({\n    space: data,\n    spaceIndex: index,\n  });\n};\n\nexport default transpose;\n","import React from 'react';\nimport styled from 'react-emotion';\nimport {\n  ListGroupItem as DefaultListGroupItem,\n  ListGroup,\n  InputGroup,\n  InputGroupAddon,\n  Input,\n} from 'reactstrap';\n\nconst DEFAULT_PADDING = 1.25;\nconst LEVEL_SPACE = 1.25;\nconst ICON_SIZE = 1;\nconst ToggleIcon = ({ on }) => <div>{on ? '-' : '+'}</div>;\n\nconst ToggleIconContainer = styled('div')(({ level = 0 }) => ({\n  position: 'absolute',\n  left: `${ICON_SIZE + level * LEVEL_SPACE}rem`,\n  width: `${ICON_SIZE}rem`,\n  height: `${ICON_SIZE}rem`,\n}));\n\nconst ListGroupItemWithPadding = styled(DefaultListGroupItem)(\n  ({ level = 0 }) => ({\n    paddingLeft: `${DEFAULT_PADDING + ICON_SIZE + level * LEVEL_SPACE}rem`,\n    cursor: 'pointer',\n  }),\n);\n\nexport const getRenderItem = path => ({\n  hasSubItems,\n  isOpen,\n  level,\n  label,\n  key,\n  onClick,\n  url,\n}) => (\n  <ListGroupItemWithPadding\n    level={level}\n    key={key}\n    onClick={onClick}\n    active={url === path}\n  >\n    {hasSubItems && (\n      <ToggleIconContainer level={level}>\n        <ToggleIcon on={isOpen} />\n      </ToggleIconContainer>\n    )}\n    {label || 'Unkown'}\n  </ListGroupItemWithPadding>\n);\n\nexport const renderList = ({ search, items }) => {\n  const onSearch = e => {\n    const { value } = e.target;\n    search(value);\n  };\n  return (\n    <>\n      <InputGroup>\n        <InputGroupAddon addonType=\"prepend\">Search</InputGroupAddon>\n        <Input onChange={onSearch} />\n      </InputGroup>\n      <ListGroup>{items}</ListGroup>\n    </>\n  );\n};\n","import React, { Component } from 'react';\nimport { withRouter } from 'react-router-dom';\nimport { get } from 'lodash';\nimport TreeViewMenu from 'react-simple-tree-menu';\n\nimport data from '../data/spaces.json';\nimport transpose from './transpose';\nimport { getRenderItem, renderList } from './renderProps';\n\nconst cleanPath = path =>\n  path\n    .split('/')\n    .filter(x => x)\n    .join('/');\n\nclass DemoPage extends Component {\n  static getDerivedStateFromProps(props) {\n    const path = get(props, 'location.pathname');\n\n    return { path: cleanPath(path) };\n  }\n\n  state = { path: '', treeData: null };\n\n  componentDidMount() {\n    this.processData();\n  }\n\n  processData = () => {\n    const treeData = transpose({ data });\n    this.setState({ treeData });\n  };\n\n  navigate = key => {\n    const { history } = this.props;\n    history.push(`/${key}`);\n  };\n\n  render() {\n    const { treeData, path } = this.state;\n\n    return (\n      <>\n        {treeData && (\n          <TreeViewMenu\n            data={treeData}\n            onClickItem={({ url, label, key }) => {\n              this.navigate(url);\n              console.log({ label, key, url }); // eslint-disable-line no-console\n            }}\n            debounceTime={125}\n            renderItem={getRenderItem(path)}\n            renderList={renderList}\n          />\n        )}\n      </>\n    );\n  }\n}\n\nexport default withRouter(DemoPage);\n"],"sourceRoot":""}