{"version":3,"sources":["DemoPage/transpose.js","DemoPage/renderProps.js","DemoPage/index.js"],"names":["cleanPath","path","split","filter","x","join","transposeSpace","_ref2","space","spaceIndex","content","pages","reduce","allPages","currentPage","pageIndex","label","t","url","u","isSpace","m","parentPage","p","splice","length","newObj","createObjFromKeys","_ref","_ref$obj","obj","keys","value","key","shift","nodes","Object","objectSpread","index","merge_default","transpose","_ref6","data","_ref6$toArray","toArray","Array","isArray","allSpaces","currentSpace","currentSpacePages","convertToArray","entries","all","_ref4","_ref5","slicedToArray","_ref3","props","objectWithoutProperties","concat","toConsumableArray","ToggleIcon","on","react_default","a","createElement","ToggleIconContainer","styled","_ref2$level","level","position","left","width","height","ListGroupItemWithPadding","ListGroupItem_default","_ref3$level","paddingLeft","DEFAULT_PADDING","cursor","getRenderItem","hasNodes","isOpen","onClick","active","renderProps_ToggleIcon","renderList","search","items","Fragment","InputGroup_default","InputGroupAddon_default","addonType","Input_default","onChange","e","target","ListGroup_default","DemoPage","state","treeData","processData","_this","setState","navigate","history","push","this","_this2","_this$state","main_default","onClickItem","console","log","debounceTime","renderItem","get_default","Component","withRouter"],"mappings":"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","file":"static/js/1.c9a2c3eb.chunk.js","sourcesContent":["import { merge } from 'lodash';\n\nconst createObjFromKeys = ({ obj = {}, keys, value }) => {\n  if (keys.length === 0) return {};\n  if (keys.length === 1) {\n    obj[keys[0]] = value;\n  } else {\n    const key = keys.shift();\n    obj[key] = obj[key] || {};\n    obj[key].nodes = {\n      ...obj[key].nodes,\n      ...createObjFromKeys({\n        obj: !obj[key].nodes ? {} : obj[key].nodes,\n        keys,\n        value,\n      }),\n    };\n  }\n  return obj;\n};\n\nconst cleanPath = path =>\n  path\n    ? path\n        .split('/')\n        .filter(x => x)\n        .join('/')\n    : '';\n\nconst transposeSpace = ({ space, spaceIndex }) => {\n  const { content } = space;\n  return content.pages.reduce((allPages, currentPage, pageIndex) => {\n    const label = currentPage.t;\n    const url = currentPage.u;\n    const isSpace = !!currentPage.m;\n    const parentPage = currentPage.p;\n    const path = url ? url.split('/').filter(x => x) : [];\n\n    // if it has a parent page, insert it to have complete nodes\n    if (parentPage) path.splice(path.length - 1, 0, parentPage);\n\n    const newObj = createObjFromKeys({\n      keys: path,\n      value: {\n        label,\n        index: isSpace ? spaceIndex : pageIndex,\n        url: cleanPath(url),\n      },\n    });\n    return merge(newObj, allPages);\n  }, {});\n};\n\nconst convertToArray = obj =>\n  Object.entries(obj).reduce(\n    (all, [key, { label, nodes, index, ...props }]) => [\n      ...all,\n      nodes\n        ? { key, label, ...props, nodes: convertToArray(nodes) }\n        : { key, label, ...props },\n    ],\n    [],\n  );\n\nconst transpose = ({ data, index, toArray = false }) => {\n  const obj = Array.isArray(data)\n    ? data.reduce((allSpaces, currentSpace, spaceIndex) => {\n        const currentSpacePages = transposeSpace({\n          space: currentSpace,\n          spaceIndex,\n        });\n        return {\n          ...allSpaces,\n          ...currentSpacePages,\n        };\n      }, {})\n    : transposeSpace({\n        space: data,\n        spaceIndex: index,\n      });\n  return toArray ? convertToArray(obj) : obj;\n};\n\nexport default transpose;\n","import React from 'react';\nimport styled from 'react-emotion';\nimport {\n  ListGroupItem as DefaultListGroupItem,\n  ListGroup,\n  InputGroup,\n  InputGroupAddon,\n  Input,\n} from 'reactstrap';\n\nconst DEFAULT_PADDING = 1.25;\nconst LEVEL_SPACE = 1.25;\nconst ICON_SIZE = 1;\nconst ToggleIcon = ({ on }) => <div>{on ? '-' : '+'}</div>;\n\nconst ToggleIconContainer = styled('div')(({ level = 0 }) => ({\n  position: 'absolute',\n  left: `${ICON_SIZE + level * LEVEL_SPACE}rem`,\n  width: `${ICON_SIZE}rem`,\n  height: `${ICON_SIZE}rem`,\n}));\n\nconst ListGroupItemWithPadding = styled(DefaultListGroupItem)(\n  ({ level = 0 }) => ({\n    paddingLeft: `${DEFAULT_PADDING + ICON_SIZE + level * LEVEL_SPACE}rem`,\n    cursor: 'pointer',\n  }),\n);\n\nexport const getRenderItem = path => ({\n  hasNodes,\n  isOpen,\n  level,\n  label,\n  key,\n  onClick,\n  url,\n}) => (\n  <ListGroupItemWithPadding\n    level={level}\n    key={key}\n    onClick={onClick}\n    active={url === path}\n  >\n    {hasNodes && (\n      <ToggleIconContainer level={level}>\n        <ToggleIcon on={isOpen} />\n      </ToggleIconContainer>\n    )}\n    {label || 'Unkown'}\n  </ListGroupItemWithPadding>\n);\n\nexport const renderList = ({ search, items }) => {\n  const onSearch = e => {\n    const { value } = e.target;\n    search(value);\n  };\n  return (\n    <>\n      <InputGroup>\n        <InputGroupAddon addonType=\"prepend\">Search</InputGroupAddon>\n        <Input onChange={onSearch} />\n      </InputGroup>\n      <ListGroup>{items}</ListGroup>\n    </>\n  );\n};\n","import React, { Component } from 'react';\nimport { withRouter } from 'react-router-dom';\nimport { get } from 'lodash';\nimport TreeViewMenu from 'react-simple-tree-menu';\n\nimport data from '../data/spaces.json';\nimport transpose from './transpose';\nimport { getRenderItem, renderList } from './renderProps';\n\nconst cleanPath = path =>\n  path\n    .split('/')\n    .filter(x => x)\n    .join('/');\n\nclass DemoPage extends Component {\n  static getDerivedStateFromProps(props) {\n    const path = get(props, 'location.pathname');\n\n    return { path: cleanPath(path) };\n  }\n\n  state = { path: '', treeData: null };\n\n  componentDidMount() {\n    this.processData();\n  }\n\n  processData = () => {\n    const treeData = transpose({ data, toArray: true });\n    this.setState({ treeData });\n  };\n\n  navigate = key => {\n    const { history } = this.props;\n    history.push(`/${key}`);\n  };\n\n  render() {\n    const { treeData, path } = this.state;\n\n    return (\n      <>\n        {treeData && (\n          <TreeViewMenu\n            data={treeData}\n            onClickItem={({ url, label, key }) => {\n              this.navigate(url);\n              console.log({ label, key, url }); // eslint-disable-line no-console\n            }}\n            debounceTime={125}\n            renderItem={getRenderItem(path)}\n            renderList={renderList}\n          />\n        )}\n      </>\n    );\n  }\n}\n\nexport default withRouter(DemoPage);\n"],"sourceRoot":""}