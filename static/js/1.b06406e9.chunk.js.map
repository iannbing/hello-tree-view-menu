{"version":3,"sources":["components/TreeViewMenu/ListGroupItem.js","components/TreeViewMenu/index.js","DemoPage/transpose.js","DemoPage/index.js"],"names":["ToggleIcon","styled","_ref","_ref$level","level","position","left","concat","width","height","ListGroupItemWithPadding","ListGroupItem_default","a","_ref2","_ref2$level","paddingLeft","DEFAULT_PADDING","cursor","ListGroupItem","_ref3","_ref3$hasSubItems","hasSubItems","_ref3$isOpen","isOpen","_ref3$level","children","props","Object","objectWithoutProperties","react_default","createElement","Fragment","assign","defaultOnClick","console","warn","TreeViewMenu","_ref4","data","activeKey","ListGroup_default","walk","_ref$activeKey","_ref$parent","parent","entries","sort","b","index","reduce","all","slicedToArray","nodeName","node","label","onClick","nodes","key","undefined","isActive","currentNode","filter","x","join","currentItem","TreeViewMenu_ListGroupItem","active","toConsumableArray","transposeSpace","space","navigate","spaceIndex","content","pages","allPages","currentPage","pageIndex","t","u","m","p","path","split","splice","length","newObj","createObjFromKeys","_ref$obj","obj","keys","value","shift","objectSpread","cleanPath","merge_default","transpose","Array","isArray","allSpaces","currentSpace","currentSpacePages","DemoPage","state","treeData","processData","_this","setState","history","push","this","_this$state","components_TreeViewMenu","get_default","Component","withRouter"],"mappings":"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","file":"static/js/1.b06406e9.chunk.js","sourcesContent":["import React from 'react';\nimport styled from 'react-emotion';\nimport { ListGroupItem as DefaultListGroupItem } from 'reactstrap';\n\nconst DEFAULT_PADDING = 1.25;\nconst LEVEL_SPACE = 1.25;\nconst ICON_SIZE = 1;\n\nconst ToggleIcon = styled('div')(({ level = 0 }) => ({\n  position: 'absolute',\n  left: `${ICON_SIZE + level * LEVEL_SPACE}rem`,\n  width: `${ICON_SIZE}rem`,\n  height: `${ICON_SIZE}rem`\n}));\n\nconst ListGroupItemWithPadding = styled(DefaultListGroupItem)(\n  ({ level = 0 }) => ({\n    paddingLeft: `${DEFAULT_PADDING + ICON_SIZE + level * LEVEL_SPACE}rem`,\n    cursor: 'pointer'\n  })\n);\n\nconst ListGroupItem = ({\n  hasSubItems = false,\n  isOpen = false,\n  level = 0,\n  children,\n  ...props\n}) => (\n  <>\n    <ListGroupItemWithPadding level={level} {...props}>\n      {hasSubItems && (\n        <ToggleIcon level={level}>{isOpen ? '-' : '+'}</ToggleIcon>\n      )}\n      {children}\n    </ListGroupItemWithPadding>\n  </>\n);\n\nexport default ListGroupItem;\n","import React from 'react';\nimport { ListGroup } from 'reactstrap';\n\nimport ListGroupItem from './ListGroupItem';\n\nconst defaultOnClick = () => console.warn('no behavior defined'); // eslint-disable-line no-console\n\nconst walk = ({ data, activeKey = '', parent = '', level = 0 }) =>\n  Object.entries(data)\n    .sort((a, b) => a[1].index - b[1].index)\n    .reduce((all, [nodeName, node]) => {\n      const { label, onClick, nodes, key } = node;\n      const hasSubItems = nodes !== undefined && nodes !== null;\n      if (!key) return all;\n      const isActive = activeKey === key;\n      const currentNode = [parent, nodeName].filter(x => x).join('/');\n      const currentItem = (\n        <ListGroupItem\n          onClick={onClick || defaultOnClick}\n          active={isActive}\n          hasSubItems={hasSubItems}\n          level={level}\n          key={currentNode}\n        >\n          {label}\n        </ListGroupItem>\n      );\n      return [\n        ...all,\n        currentItem,\n        nodes &&\n          walk({\n            data: nodes,\n            activeKey,\n            parent: currentNode,\n            level: level + 1\n          })\n      ].filter(x => x);\n    }, []);\n\nconst TreeViewMenu = ({ data, activeKey }) => (\n  <ListGroup>{walk({ data, activeKey })}</ListGroup>\n);\n\nexport default TreeViewMenu;\n","import { merge } from 'lodash';\n\nconst createObjFromKeys = ({ obj = {}, keys, value }) => {\n  if (keys.length === 1) {\n    obj[keys[0]] = value;\n  } else {\n    const key = keys.shift();\n    obj[key] = obj[key] || {};\n    obj[key].nodes = {\n      ...obj[key].nodes,\n      ...createObjFromKeys({\n        obj: typeof obj[key].nodes === 'undefined' ? {} : obj[key].nodes,\n        keys,\n        value\n      })\n    };\n  }\n\n  return obj;\n};\n\nconst cleanPath = path =>\n  path\n    .split('/')\n    .filter(x => x)\n    .join('/');\n\nconst transposeSpace = ({ space, navigate, spaceIndex }) => {\n  const { content } = space;\n  return content.pages.reduce((allPages, currentPage, pageIndex) => {\n    const {\n      t, // title\n      // c, // category\n      // i, // identifier\n      u, // url\n      // d, // directory\n      m, // is space\n      p // parent page\n    } = currentPage;\n    const path = u.split('/').filter(x => x);\n\n    // if it has a parent page, insert it to have complete nodes\n    if (p) path.splice(path.length - 1, 0, p);\n\n    const newObj = createObjFromKeys({\n      keys: path,\n      value: {\n        label: t,\n        onClick: () => navigate(u),\n        key: cleanPath(u),\n        index: m ? spaceIndex : pageIndex\n      }\n    });\n    return merge(newObj, allPages);\n  }, {});\n};\n\nconst transpose = ({ data, navigate, index }) => {\n  if (Array.isArray(data))\n    return data.reduce((allSpaces, currentSpace, spaceIndex) => {\n      const currentSpacePages = transposeSpace({\n        space: currentSpace,\n        spaceIndex,\n        navigate\n      });\n      return {\n        ...allSpaces,\n        ...currentSpacePages\n      };\n    }, {});\n  return transposeSpace({\n    space: data,\n    spaceIndex: index,\n    navigate\n  });\n};\n\nexport default transpose;\n","import React, { Component } from 'react';\nimport { withRouter } from 'react-router-dom';\nimport { get } from 'lodash';\n\nimport TreeViewMenu from '../components/TreeViewMenu';\nimport data from '../data/spaces.json';\nimport transpose from './transpose';\n\nconst cleanPath = path =>\n  path\n    .split('/')\n    .filter(x => x)\n    .join('/');\n\nclass DemoPage extends Component {\n  static getDerivedStateFromProps(props) {\n    const path = get(props, 'location.pathname');\n\n    return { path };\n  }\n\n  state = { path: '', treeData: null };\n\n  componentDidMount() {\n    this.processData();\n  }\n\n  processData = () => {\n    const treeData = transpose({ data, navigate: this.navigate });\n    this.setState({ treeData });\n  };\n\n  navigate = path => {\n    const { history } = this.props;\n    history.push(path);\n  };\n\n  render() {\n    const { path, treeData } = this.state;\n    const activeKey = cleanPath(path);\n    return treeData && <TreeViewMenu data={treeData} activeKey={activeKey} />;\n  }\n}\n\nexport default withRouter(DemoPage);\n"],"sourceRoot":""}