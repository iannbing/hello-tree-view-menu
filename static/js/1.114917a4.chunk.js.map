{"version":3,"sources":["components/TreeViewMenu/ListGroupItem.js","components/TreeViewMenu/index.js","DemoPage/transpose.js","DemoPage/index.js"],"names":["ToggleIcon","styled","_ref","_ref$level","level","position","left","concat","width","height","ListGroupItemWithPadding","ListGroupItem_default","a","_ref2","_ref2$level","paddingLeft","DEFAULT_PADDING","cursor","ListGroupItem","_ref3","_ref3$hasSubItems","hasSubItems","_ref3$isOpen","isOpen","_ref3$level","children","props","Object","objectWithoutProperties","react_default","createElement","Fragment","assign","defaultOnClick","console","warn","cleanPath","path","replace","all","g1","g2","TreeViewMenu","_ref4","data","ListGroup_default","walk","_ref$path","_ref$parent","parent","entries","sort","b","index","reduce","slicedToArray","key","node","label","onClick","nodes","url","undefined","isActive","currentNode","filter","x","join","currentItem","TreeViewMenu_ListGroupItem","active","toConsumableArray","transpose","navigate","allSpaces","currentSpace","spaceIndex","currentSpacePages","content","pages","allPages","currentPage","pageIndex","t","u","m","p","split","splice","length","newObj","createObjFromKeys","_ref$obj","obj","keys","value","shift","objectSpread","merge_default","DemoPage","state","_this","history","push","this","processedData","components_TreeViewMenu","get_default","Component","withRouter"],"mappings":"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","file":"static/js/1.114917a4.chunk.js","sourcesContent":["import React from 'react';\nimport styled from 'react-emotion';\nimport { ListGroupItem as DefaultListGroupItem } from 'reactstrap';\n\nconst DEFAULT_PADDING = 1.25;\nconst LEVEL_SPACE = 1.25;\nconst ICON_SIZE = 1;\n\nconst ToggleIcon = styled('div')(({ level = 0 }) => ({\n  position: 'absolute',\n  left: `${ICON_SIZE + level * LEVEL_SPACE}rem`,\n  width: `${ICON_SIZE}rem`,\n  height: `${ICON_SIZE}rem`\n}));\n\nconst ListGroupItemWithPadding = styled(DefaultListGroupItem)(\n  ({ level = 0 }) => ({\n    paddingLeft: `${DEFAULT_PADDING + ICON_SIZE + level * LEVEL_SPACE}rem`,\n    cursor: 'pointer'\n  })\n);\n\nconst ListGroupItem = ({\n  hasSubItems = false,\n  isOpen = false,\n  level = 0,\n  children,\n  ...props\n}) => (\n  <>\n    <ListGroupItemWithPadding level={level} {...props}>\n      {hasSubItems && (\n        <ToggleIcon level={level}>{isOpen ? '-' : '+'}</ToggleIcon>\n      )}\n      {children}\n    </ListGroupItemWithPadding>\n  </>\n);\n\nexport default ListGroupItem;\n","import React from 'react';\nimport { ListGroup } from 'reactstrap';\n\nimport ListGroupItem from './ListGroupItem';\n\nconst defaultOnClick = () => console.warn('no behavior defined'); // eslint-disable-line no-console\nconst cleanPath = path => path.replace(/(^\\/)(.*)(\\/$)/g, (all, g1, g2) => g2);\n\nconst walk = ({ data, path = '', parent = '', level = 0 }) =>\n  Object.entries(data)\n    .sort((a, b) => a[1].index - b[1].index)\n    .reduce((all, [key, node]) => {\n      const { label, onClick, nodes, url } = node;\n      const hasSubItems = nodes !== undefined && nodes !== null;\n      if (!url) return all;\n      const isActive = cleanPath(path) === cleanPath(url);\n      const currentNode = [parent, key].filter(x => x).join('/');\n      const currentItem = (\n        <ListGroupItem\n          onClick={onClick || defaultOnClick}\n          active={isActive}\n          hasSubItems={hasSubItems}\n          level={level}\n          key={currentNode}\n        >\n          {label}\n        </ListGroupItem>\n      );\n      return [\n        ...all,\n        currentItem,\n        nodes &&\n          walk({\n            data: nodes,\n            path,\n            parent: currentNode,\n            level: level + 1\n          })\n      ].filter(x => x);\n    }, []);\n\nconst TreeViewMenu = ({ data, path }) => (\n  <ListGroup>{walk({ data, path })}</ListGroup>\n);\n\nexport default TreeViewMenu;\n","import { merge } from 'lodash';\n\nconst createObjFromKeys = ({ obj = {}, keys, value }) => {\n  if (keys.length === 1) {\n    obj[keys[0]] = value;\n  } else {\n    const key = keys.shift();\n    obj[key] = obj[key] || {};\n    obj[key].nodes = {\n      ...obj[key].nodes,\n      ...createObjFromKeys({\n        obj: typeof obj[key].nodes === 'undefined' ? {} : obj[key].nodes,\n        keys,\n        value\n      })\n    };\n  }\n\n  return obj;\n};\n\nconst transpose = ({ data, navigate }) => {\n  const transposed = data.reduce((allSpaces, currentSpace, spaceIndex) => {\n    const { content } = currentSpace;\n    const currentSpacePages = content.pages.reduce(\n      (allPages, currentPage, pageIndex) => {\n        const {\n          t, // title\n          // c, // category\n          // i, // identifier\n          u, // url\n          // d, // directory\n          m, // is space\n          p // parent page\n        } = currentPage;\n        const path = u.split('/').filter(x => x);\n\n        // if it has a parent page, insert it to have complete nodes\n        if (p) path.splice(path.length - 1, 0, p);\n\n        const newObj = createObjFromKeys({\n          keys: path,\n          value: {\n            label: t,\n            onClick: () => navigate(u),\n            url: u,\n            index: m ? spaceIndex : pageIndex\n          }\n        });\n        return merge(newObj, allPages);\n      },\n      {}\n    );\n    return {\n      ...allSpaces,\n      ...currentSpacePages\n    };\n  }, {});\n  return transposed;\n};\n\nexport default transpose;\n","import React, { Component } from 'react';\nimport { withRouter } from 'react-router-dom';\nimport { get } from 'lodash';\n\nimport TreeViewMenu from '../components/TreeViewMenu';\nimport data from '../data/spaces.json';\nimport transpose from './transpose';\n\nclass DemoPage extends Component {\n  static getDerivedStateFromProps(props) {\n    const path = get(props, 'location.pathname');\n\n    return { path };\n  }\n\n  state = { path: '' };\n\n  navigate = path => {\n    const { history } = this.props;\n    history.push(path);\n  };\n\n  render() {\n    const { path } = this.state;\n    const processedData = transpose({ data, navigate: this.navigate });\n    return <TreeViewMenu data={processedData} path={path} />;\n  }\n}\n\nexport default withRouter(DemoPage);\n"],"sourceRoot":""}