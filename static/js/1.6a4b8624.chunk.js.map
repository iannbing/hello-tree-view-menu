{"version":3,"sources":["DemoPage/transpose.js","DemoPage/renderProps.js","DemoPage/index.js"],"names":["transposeSpace","_ref2","space","spaceIndex","content","pages","reduce","allPages","currentPage","pageIndex","label","t","url","u","isSpace","m","parentPage","p","path","split","filter","x","splice","length","newObj","createObjFromKeys","_ref","_ref$obj","obj","keys","value","key","shift","nodes","Object","objectSpread","join","cleanPath","index","merge_default","transpose","_ref3","data","Array","isArray","allSpaces","currentSpace","currentSpacePages","ToggleIcon","on","react_default","a","createElement","ToggleIconContainer","styled","_ref2$level","level","position","left","concat","width","height","ListGroupItemWithPadding","ListGroupItem_default","_ref3$level","paddingLeft","DEFAULT_PADDING","cursor","renderItem","_ref4","hasSubItems","isOpen","props","objectWithoutProperties","assign","renderProps_ToggleIcon","renderList","_ref5","search","items","Fragment","InputGroup_default","InputGroupAddon_default","addonType","Input_default","onChange","e","target","ListGroup_default","DemoPage","state","treeData","processData","_this","setState","navigate","history","push","this","_this2","_this$state","activeKey","main_default","onClickItem","nodePath","console","log","debounceTime","get_default","Component","withRouter"],"mappings":"4+kVA2BMA,EAAiB,SAAAC,GAA2B,IAAxBC,EAAwBD,EAAxBC,MAAOC,EAAiBF,EAAjBE,WAE/B,OADoBD,EAAZE,QACOC,MAAMC,OAAO,SAACC,EAAUC,EAAaC,GAClD,IAAMC,EAAQF,EAAYG,EACpBC,EAAMJ,EAAYK,EAClBC,IAAYN,EAAYO,EACxBC,EAAaR,EAAYS,EACzBC,EAAON,EAAIO,MAAM,KAAKC,OAAO,SAAAC,GAAC,OAAIA,IAGpCL,GAAYE,EAAKI,OAAOJ,EAAKK,OAAS,EAAG,EAAGP,GAEhD,IAAMQ,EArCgB,SAApBC,EAAoBC,GAA+B,IAAAC,EAAAD,EAA5BE,WAA4B,IAAAD,EAAtB,GAAsBA,EAAlBE,EAAkBH,EAAlBG,KAAMC,EAAYJ,EAAZI,MAC3C,GAAoB,IAAhBD,EAAKN,OACPK,EAAIC,EAAK,IAAMC,MACV,CACL,IAAMC,EAAMF,EAAKG,QACjBJ,EAAIG,GAAOH,EAAIG,IAAQ,GACvBH,EAAIG,GAAKE,MAATC,OAAAC,EAAA,EAAAD,CAAA,GACKN,EAAIG,GAAKE,MACTR,EAAkB,CACnBG,IAA+B,qBAAnBA,EAAIG,GAAKE,MAAwB,GAAKL,EAAIG,GAAKE,MAC3DJ,OACAC,WAKN,OAAOF,EAqBUH,CAAkB,CAC/BI,KAAMX,EACNY,MAAO,CACLpB,QACAqB,IAtBU,SAAAb,GAAI,OACpBA,EACGC,MAAM,KACNC,OAAO,SAAAC,GAAC,OAAIA,IACZe,KAAK,KAkBGC,CAAUzB,GACf0B,MAAOxB,EAAUX,EAAaM,KAGlC,OAAO8B,IAAMf,EAAQjB,IACpB,KAqBUiC,EAlBG,SAAAC,GAAqB,IAAlBC,EAAkBD,EAAlBC,KAAMJ,EAAYG,EAAZH,MACzB,OAAIK,MAAMC,QAAQF,GACTA,EAAKpC,OAAO,SAACuC,EAAWC,EAAc3C,GAC3C,IAAM4C,EAAoB/C,EAAe,CACvCE,MAAO4C,EACP3C,eAEF,OAAO+B,OAAAC,EAAA,EAAAD,CAAA,GACFW,EACAE,IAEJ,IACE/C,EAAe,CACpBE,MAAOwC,EACPvC,WAAYmC,iHCpDVU,EAAa,SAAAtB,GAAA,IAAGuB,EAAHvB,EAAGuB,GAAH,OAAYC,EAAAC,EAAAC,cAAA,WAAMH,EAAK,IAAM,MAE1CI,EAAsBC,YAAO,MAAPA,CAAc,SAAArD,GAAA,IAAAsD,EAAAtD,EAAGuD,MAAH,MAAoB,CAC5DC,SAAU,WACVC,KAAI,GAAAC,OALY,EADE,WAIsB,IAAAJ,EAAW,EAAXA,GAEpC,OACJK,MAAK,GAAAD,OANW,EAMX,OACLE,OAAM,GAAAF,OAPU,EAOV,UAGFG,EAA2BR,YAAOS,EAAAZ,EAAPG,CAC/B,SAAAb,GAAA,IAAAuB,EAAAvB,EAAGe,MAAH,MAAoB,CAClBS,YAAW,GAAAN,OAAKO,KAbA,WAYlB,IAAAF,EAAW,EAAXA,GACa,OACXG,OAAQ,aAICC,EAAa,SAAAC,GAAA,IAAGC,EAAHD,EAAGC,YAAaC,EAAhBF,EAAgBE,OAAQf,EAAxBa,EAAwBb,MAAO9C,EAA/B2D,EAA+B3D,MAAU8D,EAAzCtC,OAAAuC,EAAA,EAAAvC,CAAAmC,EAAA,iDACxBnB,EAAAC,EAAAC,cAACU,EAAD5B,OAAAwC,OAAA,CAA0BlB,MAAOA,GAAWgB,GACzCF,GACCpB,EAAAC,EAAAC,cAACC,EAAD,CAAqBG,MAAOA,GAC1BN,EAAAC,EAAAC,cAACuB,EAAD,CAAY1B,GAAIsB,KAGnB7D,IAIQkE,EAAa,SAAAC,GAAuB,IAApBC,EAAoBD,EAApBC,OAAQC,EAAYF,EAAZE,MAKnC,OACE7B,EAAAC,EAAAC,cAAAF,EAAAC,EAAA6B,SAAA,KACE9B,EAAAC,EAAAC,cAAA6B,EAAA9B,EAAA,KACED,EAAAC,EAAAC,cAAA8B,EAAA/B,EAAA,CAAiBgC,UAAU,WAA3B,UACAjC,EAAAC,EAAAC,cAAAgC,EAAAjC,EAAA,CAAOkC,SARI,SAAAC,GAAK,IACZxD,EAAUwD,EAAEC,OAAZzD,MACRgD,EAAOhD,OAQLoB,EAAAC,EAAAC,cAAAoC,EAAArC,EAAA,KAAY4B,KCpCZU,6MAOJC,MAAQ,CAAExE,KAAM,GAAIyE,SAAU,QAM9BC,YAAc,WACZ,IAAMD,EAAWnD,EAAU,CAAEE,SAC7BmD,EAAKC,SAAS,CAAEH,gBAGlBI,SAAW,SAAAhE,GACW8D,EAAKrB,MAAjBwB,QACAC,KAAR,IAAAtC,OAAiB5B,wFAVjBmE,KAAKN,+CAaE,IAAAO,EAAAD,KAAAE,EACoBF,KAAKR,MAAxBxE,EADDkF,EACClF,KAAMyE,EADPS,EACOT,SACRU,EA/BQ,SAAAnF,GAAI,OACpBA,EACGC,MAAM,KACNC,OAAO,SAAAC,GAAC,OAAIA,IACZe,KAAK,KA2BYC,CAAUnB,GAC5B,OACEgC,EAAAC,EAAAC,cAAAF,EAAAC,EAAA6B,SAAA,KACGW,GACCzC,EAAAC,EAAAC,cAACkD,EAAAnD,EAAD,CACET,KAAMiD,EACNU,UAAWA,EACXvB,QAAM,EACNyB,YAAa,SAAA7E,GAA8B,IAA3B8E,EAA2B9E,EAA3B8E,SAAU9F,EAAiBgB,EAAjBhB,MAAOqB,EAAUL,EAAVK,IAC/BoE,EAAKJ,SAAShE,GACd0E,QAAQC,IAAI,CAAEF,WAAU9F,QAAOqB,SAEjC4E,aAAc,IACdvC,WAAYA,EACZQ,WAAYA,wDAtCUJ,GAG9B,MAAO,CAAEtD,KAFI0F,IAAIpC,EAAO,6BAFLqC,aA+CRC,sBAAWrB","file":"static/js/1.6a4b8624.chunk.js","sourcesContent":["import { merge } from 'lodash';\n\nconst createObjFromKeys = ({ obj = {}, keys, value }) => {\n  if (keys.length === 1) {\n    obj[keys[0]] = value;\n  } else {\n    const key = keys.shift();\n    obj[key] = obj[key] || {};\n    obj[key].nodes = {\n      ...obj[key].nodes,\n      ...createObjFromKeys({\n        obj: typeof obj[key].nodes === 'undefined' ? {} : obj[key].nodes,\n        keys,\n        value\n      })\n    };\n  }\n\n  return obj;\n};\n\nconst cleanPath = path =>\n  path\n    .split('/')\n    .filter(x => x)\n    .join('/');\n\nconst transposeSpace = ({ space, spaceIndex }) => {\n  const { content } = space;\n  return content.pages.reduce((allPages, currentPage, pageIndex) => {\n    const label = currentPage.t;\n    const url = currentPage.u;\n    const isSpace = !!currentPage.m;\n    const parentPage = currentPage.p;\n    const path = url.split('/').filter(x => x);\n\n    // if it has a parent page, insert it to have complete nodes\n    if (parentPage) path.splice(path.length - 1, 0, parentPage);\n\n    const newObj = createObjFromKeys({\n      keys: path,\n      value: {\n        label,\n        key: cleanPath(url),\n        index: isSpace ? spaceIndex : pageIndex\n      }\n    });\n    return merge(newObj, allPages);\n  }, {});\n};\n\nconst transpose = ({ data, index }) => {\n  if (Array.isArray(data))\n    return data.reduce((allSpaces, currentSpace, spaceIndex) => {\n      const currentSpacePages = transposeSpace({\n        space: currentSpace,\n        spaceIndex\n      });\n      return {\n        ...allSpaces,\n        ...currentSpacePages\n      };\n    }, {});\n  return transposeSpace({\n    space: data,\n    spaceIndex: index\n  });\n};\n\nexport default transpose;\n","import React from 'react';\nimport styled from 'react-emotion';\nimport {\n  ListGroupItem as DefaultListGroupItem,\n  ListGroup,\n  InputGroup,\n  InputGroupAddon,\n  Input,\n} from 'reactstrap';\n\nconst DEFAULT_PADDING = 1.25;\nconst LEVEL_SPACE = 1.25;\nconst ICON_SIZE = 1;\nconst ToggleIcon = ({ on }) => <div>{on ? '-' : '+'}</div>;\n\nconst ToggleIconContainer = styled('div')(({ level = 0 }) => ({\n  position: 'absolute',\n  left: `${ICON_SIZE + level * LEVEL_SPACE}rem`,\n  width: `${ICON_SIZE}rem`,\n  height: `${ICON_SIZE}rem`,\n}));\n\nconst ListGroupItemWithPadding = styled(DefaultListGroupItem)(\n  ({ level = 0 }) => ({\n    paddingLeft: `${DEFAULT_PADDING + ICON_SIZE + level * LEVEL_SPACE}rem`,\n    cursor: 'pointer',\n  }),\n);\n\nexport const renderItem = ({ hasSubItems, isOpen, level, label, ...props }) => (\n  <ListGroupItemWithPadding level={level} {...props}>\n    {hasSubItems && (\n      <ToggleIconContainer level={level}>\n        <ToggleIcon on={isOpen} />\n      </ToggleIconContainer>\n    )}\n    {label}\n  </ListGroupItemWithPadding>\n);\n\nexport const renderList = ({ search, items }) => {\n  const onSearch = e => {\n    const { value } = e.target;\n    search(value);\n  };\n  return (\n    <>\n      <InputGroup>\n        <InputGroupAddon addonType=\"prepend\">Search</InputGroupAddon>\n        <Input onChange={onSearch} />\n      </InputGroup>\n      <ListGroup>{items}</ListGroup>\n    </>\n  );\n};\n","import React, { Component } from 'react';\nimport { withRouter } from 'react-router-dom';\nimport { get } from 'lodash';\nimport TreeViewMenu from 'react-simple-tree-menu';\n\nimport data from '../data/spaces.json';\nimport transpose from './transpose';\nimport { renderItem, renderList } from './renderProps';\n\nconst cleanPath = path =>\n  path\n    .split('/')\n    .filter(x => x)\n    .join('/');\n\nclass DemoPage extends Component {\n  static getDerivedStateFromProps(props) {\n    const path = get(props, 'location.pathname');\n\n    return { path };\n  }\n\n  state = { path: '', treeData: null };\n\n  componentDidMount() {\n    this.processData();\n  }\n\n  processData = () => {\n    const treeData = transpose({ data });\n    this.setState({ treeData });\n  };\n\n  navigate = key => {\n    const { history } = this.props;\n    history.push(`/${key}`);\n  };\n\n  render() {\n    const { path, treeData } = this.state;\n    const activeKey = cleanPath(path);\n    return (\n      <>\n        {treeData && (\n          <TreeViewMenu\n            data={treeData}\n            activeKey={activeKey}\n            search\n            onClickItem={({ nodePath, label, key }) => {\n              this.navigate(key);\n              console.log({ nodePath, label, key }); // eslint-disable-line no-console\n            }}\n            debounceTime={125}\n            renderItem={renderItem}\n            renderList={renderList}\n          />\n        )}\n      </>\n    );\n  }\n}\n\nexport default withRouter(DemoPage);\n"],"sourceRoot":""}