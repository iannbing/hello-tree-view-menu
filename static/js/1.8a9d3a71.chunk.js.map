{"version":3,"sources":["components/TreeViewMenu/ListGroupItem.js","components/TreeViewMenu/walk.js","components/TreeViewMenu/index.js","DemoPage/transpose.js","DemoPage/index.js"],"names":["ToggleIcon","styled","_ref","_ref$level","level","position","left","concat","width","height","ListGroupItemWithPadding","ListGroupItem_default","a","_ref2","_ref2$level","paddingLeft","DEFAULT_PADDING","cursor","ListGroupItem","_ref3","_ref3$hasSubItems","hasSubItems","_ref3$isOpen","isOpen","_ref3$level","children","props","Object","objectWithoutProperties","react_default","createElement","assign","getNodeComponent","node","nodeName","_props$parent","parent","_props$level","openNodes","searchTerm","nodes","currentNode","filter","x","join","showChildren","includes","currentItem","activeKey","key","label","getOnClickFunction","onClick","isActive","showCurrent","toLowerCase","trim","onClickFunction","TreeViewMenu_ListGroupItem","active","getItem","objectSpread","nextLevelItems","walk","toConsumableArray","data","entries","sort","b","index","reduce","all","slicedToArray","defaultOnClick","console","warn","realtimeSearch","debounce_default","searchFunction","value","TreeViewMenu","state","onChange","e","target","_this","setState","toggleNode","openNode","loadListItems","_this$props","_this$state","_this$props2","this","search","Fragment","InputGroup_default","InputGroupAddon_default","addonType","Input_default","ListGroup_default","React","Component","defaultProps","transposeSpace","space","navigate","spaceIndex","content","pages","allPages","currentPage","pageIndex","t","u","m","p","path","split","splice","length","newObj","createObjFromKeys","_ref$obj","obj","keys","shift","cleanPath","merge_default","transpose","Array","isArray","allSpaces","currentSpace","currentSpacePages","DemoPage","treeData","processData","history","push","components_TreeViewMenu","get_default","withRouter"],"mappings":"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","file":"static/js/1.8a9d3a71.chunk.js","sourcesContent":["import React from 'react';\nimport styled from 'react-emotion';\nimport { ListGroupItem as DefaultListGroupItem } from 'reactstrap';\n\nconst DEFAULT_PADDING = 1.25;\nconst LEVEL_SPACE = 1.25;\nconst ICON_SIZE = 1;\n\nconst ToggleIcon = styled('div')(({ level = 0 }) => ({\n  position: 'absolute',\n  left: `${ICON_SIZE + level * LEVEL_SPACE}rem`,\n  width: `${ICON_SIZE}rem`,\n  height: `${ICON_SIZE}rem`\n}));\n\nconst ListGroupItemWithPadding = styled(DefaultListGroupItem)(\n  ({ level = 0 }) => ({\n    paddingLeft: `${DEFAULT_PADDING + ICON_SIZE + level * LEVEL_SPACE}rem`,\n    cursor: 'pointer'\n  })\n);\n\nconst ListGroupItem = ({\n  hasSubItems = false,\n  isOpen = false,\n  level = 0,\n  children,\n  ...props\n}) => (\n  <ListGroupItemWithPadding level={level} {...props}>\n    {hasSubItems && <ToggleIcon level={level}>{isOpen ? '-' : '+'}</ToggleIcon>}\n    {children}\n  </ListGroupItemWithPadding>\n);\n\nexport default ListGroupItem;\n","import React from 'react';\n\nimport ListGroupItem from './ListGroupItem';\n\nconst getItem = ({\n  activeKey,\n  key,\n  showChildren,\n  nodes,\n  level,\n  currentNode,\n  label,\n  searchTerm,\n  getOnClickFunction,\n  onClick\n}) => {\n  const isActive = activeKey === key;\n  const showCurrent =\n    !searchTerm ||\n    label.toLowerCase().includes(searchTerm.trim().toLowerCase());\n  const onClickFunction = getOnClickFunction({ onClick, node: currentNode });\n\n  return (\n    showCurrent && (\n      <ListGroupItem\n        hasSubItems={!!nodes}\n        isOpen={showChildren}\n        level={level}\n        onClick={onClickFunction}\n        active={isActive}\n        key={currentNode}\n      >\n        {label}\n      </ListGroupItem>\n    )\n  );\n};\n\nconst getNodeComponent = (node, nodeName, props) => {\n  const { parent = '', level = 0, openNodes, searchTerm } = props;\n  const { nodes } = node;\n  const currentNode = [parent, nodeName].filter(x => x).join('/');\n  const showChildren =\n    !!nodes && (openNodes.includes(currentNode) || searchTerm);\n\n  const currentItem = getItem({\n    showChildren,\n    currentNode,\n    ...props,\n    ...node\n  });\n  const nextLevelItems = showChildren\n    ? walk(nodes, { ...props, parent: currentNode, level: level + 1 })\n    : [];\n\n  return [currentItem, ...nextLevelItems].filter(x => x);\n};\n\nconst walk = (data, props) =>\n  Object.entries(data)\n    .sort((a, b) => a[1].index - b[1].index)\n    .reduce(\n      (all, [nodeName, node]) => [\n        ...all,\n        ...(node.key ? getNodeComponent(node, nodeName, props) : [])\n      ],\n      []\n    );\n\nexport default walk;\n","import React from 'react';\nimport { debounce } from 'lodash';\nimport { ListGroup, InputGroup, InputGroupAddon, Input } from 'reactstrap';\n\nimport walk from './walk';\n\nconst defaultOnClick = () => console.warn('no behavior defined'); // eslint-disable-line no-console\n\nconst realtimeSearch = debounce(\n  (searchFunction, value) => searchFunction(value),\n  500\n);\n\nclass TreeViewMenu extends React.Component {\n  static defaultProps = {\n    data: null,\n    activeKey: '',\n    search: false\n  };\n\n  state = { openNodes: [], searchTerm: '' };\n\n  onChange = e => {\n    const { value } = e.target;\n    realtimeSearch(searchTerm => this.setState({ searchTerm }), value);\n  };\n\n  toggleNode = node => {\n    const { openNodes } = this.state;\n    if (openNodes.includes(node)) {\n      this.setState({\n        openNodes: openNodes.filter(openNode => openNode !== node)\n      });\n    } else {\n      this.setState({ openNodes: [...openNodes, node] });\n    }\n  };\n\n  getOnClickFunction = ({ onClick, node }) => () => {\n    const onClickFn = onClick || defaultOnClick;\n    onClickFn();\n    this.toggleNode(node);\n  };\n\n  loadListItems = () => {\n    const { data, activeKey } = this.props;\n    const { openNodes, searchTerm } = this.state;\n\n    return walk(data, {\n      activeKey,\n      openNodes,\n      searchTerm,\n      getOnClickFunction: this.getOnClickFunction\n    });\n  };\n\n  render() {\n    const { data, search } = this.props;\n\n    return (\n      <>\n        {search && (\n          <InputGroup>\n            <InputGroupAddon addonType=\"prepend\">Search</InputGroupAddon>\n            <Input onChange={this.onChange} />\n          </InputGroup>\n        )}\n        {data && <ListGroup>{this.loadListItems()}</ListGroup>}\n      </>\n    );\n  }\n}\n\nexport default TreeViewMenu;\n","import { merge } from 'lodash';\n\nconst createObjFromKeys = ({ obj = {}, keys, value }) => {\n  if (keys.length === 1) {\n    obj[keys[0]] = value;\n  } else {\n    const key = keys.shift();\n    obj[key] = obj[key] || {};\n    obj[key].nodes = {\n      ...obj[key].nodes,\n      ...createObjFromKeys({\n        obj: typeof obj[key].nodes === 'undefined' ? {} : obj[key].nodes,\n        keys,\n        value\n      })\n    };\n  }\n\n  return obj;\n};\n\nconst cleanPath = path =>\n  path\n    .split('/')\n    .filter(x => x)\n    .join('/');\n\nconst transposeSpace = ({ space, navigate, spaceIndex }) => {\n  const { content } = space;\n  return content.pages.reduce((allPages, currentPage, pageIndex) => {\n    const {\n      t, // title\n      // c, // category\n      // i, // identifier\n      u, // url\n      // d, // directory\n      m, // is space\n      p // parent page\n    } = currentPage;\n    const path = u.split('/').filter(x => x);\n\n    // if it has a parent page, insert it to have complete nodes\n    if (p) path.splice(path.length - 1, 0, p);\n\n    const newObj = createObjFromKeys({\n      keys: path,\n      value: {\n        label: t,\n        onClick: () => navigate(u),\n        key: cleanPath(u),\n        index: m ? spaceIndex : pageIndex\n      }\n    });\n    return merge(newObj, allPages);\n  }, {});\n};\n\nconst transpose = ({ data, navigate, index }) => {\n  if (Array.isArray(data))\n    return data.reduce((allSpaces, currentSpace, spaceIndex) => {\n      const currentSpacePages = transposeSpace({\n        space: currentSpace,\n        spaceIndex,\n        navigate\n      });\n      return {\n        ...allSpaces,\n        ...currentSpacePages\n      };\n    }, {});\n  return transposeSpace({\n    space: data,\n    spaceIndex: index,\n    navigate\n  });\n};\n\nexport default transpose;\n","import React, { Component } from 'react';\nimport { withRouter } from 'react-router-dom';\nimport { get } from 'lodash';\n\nimport TreeViewMenu from '../components/TreeViewMenu';\nimport data from '../data/spaces.json';\nimport transpose from './transpose';\n\nconst cleanPath = path =>\n  path\n    .split('/')\n    .filter(x => x)\n    .join('/');\n\nclass DemoPage extends Component {\n  static getDerivedStateFromProps(props) {\n    const path = get(props, 'location.pathname');\n\n    return { path };\n  }\n\n  state = { path: '', treeData: null };\n\n  componentDidMount() {\n    this.processData();\n  }\n\n  processData = () => {\n    const treeData = transpose({ data, navigate: this.navigate });\n    this.setState({ treeData });\n  };\n\n  navigate = path => {\n    const { history } = this.props;\n    history.push(path);\n  };\n\n  render() {\n    const { path, treeData } = this.state;\n    const activeKey = cleanPath(path);\n    return (\n      <>\n        {treeData && (\n          <TreeViewMenu data={treeData} activeKey={activeKey} search />\n        )}\n      </>\n    );\n  }\n}\n\nexport default withRouter(DemoPage);\n"],"sourceRoot":""}