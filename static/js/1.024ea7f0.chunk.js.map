{"version":3,"sources":["components/TreeViewMenu/ListGroupItem.js","components/TreeViewMenu/walk.js","components/TreeViewMenu/index.js","DemoPage/transpose.js","DemoPage/index.js"],"names":["DefaultToggleIcon","_ref","on","react_default","a","createElement","ToggleIconContainer","styled","_ref2","_ref2$level","level","position","left","concat","width","height","ListGroupItemWithPadding","ListGroupItem_default","_ref3","_ref3$level","paddingLeft","DEFAULT_PADDING","cursor","ListGroupItem","_ref4","_ref4$hasSubItems","hasSubItems","_ref4$isOpen","isOpen","_ref4$level","_ref4$toggleIcon","toggleIcon","children","props","Object","objectWithoutProperties","ToggleIcon","assign","walk","data","entries","sort","b","index","reduce","all","slicedToArray","nodeName","node","toConsumableArray","key","generateBranch","_props$parent","parent","_props$level","openNodes","searchTerm","activeKey","nodes","currentNode","filter","x","join","isActive","includes","currentItem","getComponent","objectSpread","nextLevelItems","label","getOnClickItem","showCurrent","toLowerCase","trim","onClickItem","TreeViewMenu_ListGroupItem","onClick","active","realtimeSearch","debounce_default","searchFunction","value","TreeViewMenu","state","onChange","e","target","_this","setState","toggleNode","openNode","loadListItems","_this$props","_this$state","_this$props2","this","search","Fragment","InputGroup_default","InputGroupAddon_default","addonType","Input_default","ListGroup_default","React","Component","defaultProps","console","warn","transposeSpace","space","spaceIndex","content","pages","allPages","currentPage","pageIndex","t","url","u","isSpace","m","parentPage","p","path","split","splice","length","newObj","createObjFromKeys","_ref$obj","obj","keys","shift","cleanPath","merge_default","transpose","Array","isArray","allSpaces","currentSpace","currentSpacePages","Icon","style","fontWeight","DemoPage","treeData","processData","navigate","history","push","_this2","components_TreeViewMenu","log","get_default","withRouter"],"mappings":"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","file":"static/js/1.024ea7f0.chunk.js","sourcesContent":["import React from 'react';\nimport styled from 'react-emotion';\nimport { ListGroupItem as DefaultListGroupItem } from 'reactstrap';\n\nconst DEFAULT_PADDING = 1.25;\nconst LEVEL_SPACE = 1.25;\nconst ICON_SIZE = 1;\nconst DefaultToggleIcon = ({ on }) => <div>{on ? '-' : '+'}</div>;\n\nconst ToggleIconContainer = styled('div')(({ level = 0 }) => ({\n  position: 'absolute',\n  left: `${ICON_SIZE + level * LEVEL_SPACE}rem`,\n  width: `${ICON_SIZE}rem`,\n  height: `${ICON_SIZE}rem`\n}));\n\nconst ListGroupItemWithPadding = styled(DefaultListGroupItem)(\n  ({ level = 0 }) => ({\n    paddingLeft: `${DEFAULT_PADDING + ICON_SIZE + level * LEVEL_SPACE}rem`,\n    cursor: 'pointer'\n  })\n);\n\nconst ListGroupItem = ({\n  hasSubItems = false,\n  isOpen = false,\n  level = 0,\n  toggleIcon = DefaultToggleIcon,\n  children,\n  ...props\n}) => {\n  const ToggleIcon = toggleIcon;\n  return (\n    <ListGroupItemWithPadding level={level} {...props}>\n      {hasSubItems && (\n        <ToggleIconContainer level={level}>\n          <ToggleIcon on={isOpen} />\n        </ToggleIconContainer>\n      )}\n      {children}\n    </ListGroupItemWithPadding>\n  );\n};\n\nexport default ListGroupItem;\n","import React from 'react';\n\nimport ListGroupItem from './ListGroupItem';\n\nconst walk = (data, props) =>\n  Object.entries(data)\n    .sort((a, b) => a[1].index - b[1].index)\n    .reduce(\n      (all, [nodeName, node]) => [\n        ...all,\n        ...(node.key ? generateBranch(node, nodeName, props) : [])\n      ],\n      []\n    );\n\nconst generateBranch = (node, nodeName, props) => {\n  const { parent = '', level = 0, openNodes, searchTerm, activeKey } = props;\n  const { nodes, key } = node;\n  const currentNode = [parent, nodeName].filter(x => x).join('/');\n  const isActive = activeKey === key;\n  const isOpen = !!nodes && (openNodes.includes(currentNode) || !!searchTerm);\n\n  const currentItem = getComponent({\n    isOpen,\n    currentNode,\n    isActive,\n    ...props,\n    ...node\n  });\n  const nextLevelItems = isOpen\n    ? walk(nodes, { ...props, parent: currentNode, level: level + 1 })\n    : [];\n\n  return [currentItem, ...nextLevelItems].filter(x => x);\n};\n\nconst getComponent = ({\n  isActive,\n  isOpen,\n  nodes,\n  key,\n  level,\n  currentNode,\n  label,\n  searchTerm,\n  getOnClickItem,\n  toggleIcon\n}) => {\n  const showCurrent =\n    !searchTerm ||\n    label.toLowerCase().includes(searchTerm.trim().toLowerCase());\n  const onClickItem = getOnClickItem({ node: currentNode, label, key });\n\n  //   console.log(isOpen);\n\n  return (\n    showCurrent && (\n      <ListGroupItem\n        hasSubItems={!!nodes}\n        isOpen={isOpen}\n        level={level}\n        onClick={onClickItem}\n        active={isActive}\n        key={currentNode}\n        toggleIcon={toggleIcon}\n      >\n        {label}\n      </ListGroupItem>\n    )\n  );\n};\n\nexport default walk;\n","import React from 'react';\nimport { debounce } from 'lodash';\nimport { ListGroup, InputGroup, InputGroupAddon, Input } from 'reactstrap';\n\nimport walk from './walk';\n\nconst defaultOnClick = () => console.warn('no behavior defined'); // eslint-disable-line no-console\n\nconst realtimeSearch = debounce(\n  (searchFunction, value) => searchFunction(value),\n  500\n);\n\nclass TreeViewMenu extends React.Component {\n  static defaultProps = {\n    data: null,\n    activeKey: '',\n    search: false,\n    onClickItem: defaultOnClick\n  };\n\n  state = { openNodes: [], searchTerm: '' };\n\n  onChange = e => {\n    const { value } = e.target;\n    realtimeSearch(searchTerm => this.setState({ searchTerm }), value);\n  };\n\n  toggleNode = node => {\n    const { openNodes } = this.state;\n    if (openNodes.includes(node)) {\n      this.setState({\n        openNodes: openNodes.filter(openNode => openNode !== node)\n      });\n    } else {\n      this.setState({ openNodes: [...openNodes, node] });\n    }\n  };\n\n  getOnClickItem = props => () => {\n    const { onClickItem } = this.props;\n    onClickItem(props);\n    this.toggleNode(props.node);\n  };\n\n  loadListItems = () => {\n    const { data, activeKey, toggleIcon } = this.props;\n    const { openNodes, searchTerm } = this.state;\n\n    return walk(data, {\n      activeKey,\n      openNodes,\n      searchTerm,\n      toggleIcon,\n      getOnClickItem: this.getOnClickItem\n    });\n  };\n\n  render() {\n    const { data, search } = this.props;\n\n    return (\n      <>\n        {search && (\n          <InputGroup>\n            <InputGroupAddon addonType=\"prepend\">Search</InputGroupAddon>\n            <Input onChange={this.onChange} />\n          </InputGroup>\n        )}\n        {data && <ListGroup>{this.loadListItems()}</ListGroup>}\n      </>\n    );\n  }\n}\n\nexport default TreeViewMenu;\n","import { merge } from 'lodash';\n\nconst createObjFromKeys = ({ obj = {}, keys, value }) => {\n  if (keys.length === 1) {\n    obj[keys[0]] = value;\n  } else {\n    const key = keys.shift();\n    obj[key] = obj[key] || {};\n    obj[key].nodes = {\n      ...obj[key].nodes,\n      ...createObjFromKeys({\n        obj: typeof obj[key].nodes === 'undefined' ? {} : obj[key].nodes,\n        keys,\n        value\n      })\n    };\n  }\n\n  return obj;\n};\n\nconst cleanPath = path =>\n  path\n    .split('/')\n    .filter(x => x)\n    .join('/');\n\nconst transposeSpace = ({ space, spaceIndex }) => {\n  const { content } = space;\n  return content.pages.reduce((allPages, currentPage, pageIndex) => {\n    const label = currentPage.t;\n    const url = currentPage.u;\n    const isSpace = !!currentPage.m;\n    const parentPage = currentPage.p;\n    const path = url.split('/').filter(x => x);\n\n    // if it has a parent page, insert it to have complete nodes\n    if (parentPage) path.splice(path.length - 1, 0, parentPage);\n\n    const newObj = createObjFromKeys({\n      keys: path,\n      value: {\n        label,\n        key: cleanPath(url),\n        index: isSpace ? spaceIndex : pageIndex\n      }\n    });\n    return merge(newObj, allPages);\n  }, {});\n};\n\nconst transpose = ({ data, index }) => {\n  if (Array.isArray(data))\n    return data.reduce((allSpaces, currentSpace, spaceIndex) => {\n      const currentSpacePages = transposeSpace({\n        space: currentSpace,\n        spaceIndex\n      });\n      return {\n        ...allSpaces,\n        ...currentSpacePages\n      };\n    }, {});\n  return transposeSpace({\n    space: data,\n    spaceIndex: index\n  });\n};\n\nexport default transpose;\n","import React, { Component } from 'react';\nimport { withRouter } from 'react-router-dom';\nimport { get } from 'lodash';\n\nimport TreeViewMenu from '../components/TreeViewMenu';\nimport data from '../data/spaces.json';\nimport transpose from './transpose';\n\nconst cleanPath = path =>\n  path\n    .split('/')\n    .filter(x => x)\n    .join('/');\n\nconst Icon = ({ on }) => (\n  <div style={{ fontWeight: 'bold', position: 'absolute', left: -8 }}>\n    {on ? '[-]' : '[+]'}\n  </div>\n);\n\nclass DemoPage extends Component {\n  static getDerivedStateFromProps(props) {\n    const path = get(props, 'location.pathname');\n\n    return { path };\n  }\n\n  state = { path: '', treeData: null };\n\n  componentDidMount() {\n    this.processData();\n  }\n\n  processData = () => {\n    const treeData = transpose({ data });\n    this.setState({ treeData });\n  };\n\n  navigate = key => {\n    const { history } = this.props;\n    history.push(`/${key}`);\n  };\n\n  render() {\n    const { path, treeData } = this.state;\n    const activeKey = cleanPath(path);\n    return (\n      <>\n        {treeData && (\n          <TreeViewMenu\n            data={treeData}\n            activeKey={activeKey}\n            search\n            toggleIcon={Icon} // remove this prop to see the default icon\n            onClickItem={({ node, label, key }) => {\n              this.navigate(key);\n              console.log({ node, label, key }); // eslint-disable-line no-console\n            }}\n          />\n        )}\n      </>\n    );\n  }\n}\n\nexport default withRouter(DemoPage);\n"],"sourceRoot":""}